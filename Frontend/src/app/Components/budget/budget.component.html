<div class="p-6 space-y-10 max-w-6xl mx-auto">
  <!-- Header -->
  <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
    <h2 class="text-3xl font-extrabold text-indigo-700 flex items-center gap-2">
      ðŸ“… Monthly Budgets
    </h2>
    <button
      mat-flat-button
      color="primary"
      (click)="openSetBudgetDialog()"
      class="flex items-center gap-2 shadow-md hover:shadow-lg transition duration-300 rounded-lg"
    >
      <mat-icon>add</mat-icon>
      <span>Add Budget</span>
    </button>
  </div>

  <!-- Month Picker -->
  <div>
    <mat-form-field appearance="fill" class="w-64">
      <mat-label>Select Month</mat-label>
      <input
        matInput
        [matDatepicker]="picker"
        [value]="selectedMonth.value"
        readonly
        (click)="picker.open()" />
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker
        #picker
        startView="multi-year"
        (monthSelected)="onMonthSelected($event, picker)"
        panelClass="month-picker">
      </mat-datepicker>
    </mat-form-field>
  </div>

  <!-- Budget Table -->
  <div class="space-y-6">
    <h3 class="text-xl font-bold text-indigo-700 flex items-center gap-2">ðŸ“‹ Budget Details</h3>

    <div class="bg-white rounded-2xl shadow border border-gray-100 overflow-hidden">
      <table class="min-w-full text-sm table-auto">
        <thead class="bg-indigo-100 text-indigo-700 uppercase text-xs tracking-wider">
          <tr>
            <th class="py-3 px-4 text-left">Category</th>
            <th class="py-3 px-4 text-left">Month</th>
            <th class="py-3 px-4 text-left">Amount (â‚¹)</th>
          </tr>
        </thead>
        <tbody *ngIf="paginatedBudgets.length > 0">
          <tr
            *ngFor="let budget of paginatedBudgets"
            class="border-t hover:bg-gray-50 transition-colors"
          >
            <td class="py-3 px-4">{{ budget.category }}</td>
            <td class="py-3 px-4">{{ selectedMonth.value | date: 'MMMM yyyy' }}</td>
            <td class="py-3 px-4 font-semibold text-green-700">
              â‚¹{{ budget.amount | number: '1.0-0' }}
            </td>
          </tr>
        </tbody>
      </table>

      <!-- No Budgets Found -->
      <div *ngIf="budgets.length === 0" class="p-8 text-center text-gray-500">
        <mat-icon class="text-4xl mb-2 text-gray-400">info</mat-icon>
        <p>No budgets found for the selected month.</p>
      </div>
    </div>

    <!-- Pagination Controls -->
    <div
      *ngIf="budgets.length > pageSize"
      class="flex items-center justify-between pt-4 text-sm text-gray-600"
    >
      <button
        mat-stroked-button
        color="primary"
        (click)="prevPage()"
        [disabled]="currentPage === 0"
      >
        Previous
      </button>
      <span>
        Page {{ currentPage + 1 }} of {{ Math.ceil(budgets.length / pageSize) }}
      </span>
      <button
        mat-stroked-button
        color="primary"
        (click)="nextPage()"
        [disabled]="(currentPage + 1) * pageSize >= budgets.length"
      >
        Next
      </button>
    </div>
  </div>
</div>
